--------------------------------------------------------------------TẠO DATABASE---------------------------------------------------------------------
USE MASTER 
GO
IF EXISTS(SELECT *FROM SYS.databases WHERE NAME='QL_SHOPDONGHOO')
DROP DATABASE QL_SHOPDONGHOO
GO
CREATE DATABASE QL_SHOPDONGHOO
GO
USE QL_SHOPDONGHOO
GO
---------------------------------------------------------------TẠO BẢNG,KHOÁ CHÍNH,KHOÁ NGO?I--------------------------------------------------------
------ TẠO BẢNG NHANVIEN
SET DATEFORMAT DMY

CREATE TABLE NHANVIEN
(
	MANV CHAR(10) NOT NULL PRIMARY KEY,
	TENNV NVARCHAR(30),
	DIACHI NVARCHAR(30),
	GIOITINH NVARCHAR(5),
	NamSINH DATE,
	NGAYVL DATE NOT NULL,
	SDT CHAR(11),
	LUONG MONEY
)

------ TẠO BẢNG KHACHHANG
CREATE TABLE KHACHHANG
(
	MAKH CHAR(10) NOT NULL PRIMARY KEY,
	TENKH NVARCHAR(30),
	GIOITINH NVARCHAR(5),
	DIACHI NVARCHAR(30),
	SDT CHAR(11)
)
------ TẠO BẢNG LOAIDONGHO
CREATE TABLE LOAIDONGHO
(
	MALOAIDH CHAR(10) NOT NULL PRIMARY KEY,
	TENLOAIDH NVARCHAR(100)
)

------ TẠO BẢNG NHACUNGCAP
CREATE TABLE NHACUNGCAP
(
	MANHACUNGCAP CHAR(10) NOT NULL PRIMARY KEY,
	TENNHACUNGCAP NVARCHAR(50),
	DIACHI NVARCHAR(100),
	SDT CHAR(11)
)
------ TẠO BẢNG DONGHO
CREATE TABLE DONGHO
(
	MADH CHAR(10) NOT NULL PRIMARY KEY,
	TENDH NVARCHAR(100),
	MAU NVARCHAR(50),
	DONGIA MONEY,
	MALOAIDH CHAR(10),
	MANHACUNGCAP CHAR(10),
	TONKHO INT,
	HINHANH NVARCHAR(50),
	CONSTRAINT FK_DONGHO_LOAIDONGHO FOREIGN KEY (MALOAIDH) REFERENCES LOAIDONGHO(MALOAIDH),
	CONSTRAINT FK_DONGHO_NHACUNGCAP FOREIGN KEY (MANHACUNGCAP) REFERENCES NHACUNGCAP(MANHACUNGCAP)
)
------ TẠO BẢNG NHAP HÀNG
CREATE TABLE NHAP
(
	MAN INT NOT NULL IDENTITY PRIMARY KEY,
	NGAYNHAP DATE,
	TONGTIEN MONEY,

)
------ TẠO BẢNG CHI TIET NHAP HÀNG
CREATE TABLE CHITIETNHAP
(
	MAN INT,
	MADH CHAR(10),
	SOLUONG INT,
	DONGIANHAP MONEY,
	TONGTIENNHAP MONEY,
	MANHACUNGCAP CHAR(10),
	PRIMARY KEY(MAN,MADH),
	FOREIGN KEY (MAN) REFERENCES NHAP(MAN),
	FOREIGN KEY (MANHACUNGCAP) REFERENCES NHACUNGCAP(MANHACUNGCAP)
)

------ TẠO BẢNG HOADON
SET DATEFORMAT DMY
CREATE TABLE HOADON
(
	MAHD CHAR(10) NOT NULL PRIMARY KEY, 
	NGAYRAHD DATE,
	THANHTOAN MONEY,--THANHTOAN = THANHTIEN-GIAMGIA*THANHTIEN
	MAKH CHAR(10),
	MANV CHAR(10),
	CONSTRAINT FK_HOADON_NHANVIEN FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV),
	CONSTRAINT FK_HOADON_KHACHHANG FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH)
)
------ TẠO BẢNG CHITIETHD
CREATE TABLE CHITIETHD
(
	MAHD CHAR(10) NOT NULL,
	MADH CHAR(10) NOT NULL,
	MAU NVARCHAR(10),
	SOLUONG INT,
	THANHTIEN MONEY,--THÀNH TI?N = SOLUONG*DONGIA,
	DONGIA MONEY,
	CONSTRAINT PK_CHITIETHD PRIMARY KEY(MAHD,MADH),
	CONSTRAINT FK_CHITIETHD_HOADON FOREIGN KEY (MAHD) REFERENCES HOADON(MAHD),
	CONSTRAINT FK_CHITIETHD_DONGHO FOREIGN KEY (MADH) REFERENCES DONGHO(MADH)
)

CREATE TABLE ACCOUNT
(	
	USERNAME VARCHAR(20) primary key,
	FIRSTNAME NVARCHAR(20),
	LASTNAME NVARCHAR(20),
	passwordd VARCHAR(50),
	Email varchar(50),
	NGAYSINH DATETIME
)

------------------------------------------------------------INSERT DỮ LIỆU---------------------------------------------------------------------------
------NH?P BẢNG NHANVIEN
SET DATEFORMAT DMY
INSERT INTO NHANVIEN
VALUES
('NV01',N'Bùi Minh Quốc Huy',N'TP.HCM',N'Nam','22/10/1960','22/07/2006','0127356784',10000000),
('NV02',N'Võ Thị Thanh Thảo',N'TP.HCM',N'Nữ','03/04/1974','30/07/2006','0123953245',10000000),
('NV03',N'Lê Thị Mai',N'TP.HCM',N'Nữ','12/06/1980','08/05/2006','0904563421',7000000),
('NV04',N'Trần Kim Ngọc',N'LONG AN',N'Nữ','09/03/1965','10/02/2006','0938325476',6000000),
('NV05',N'Lai Như Quỳnh',N'CÀ MAU',N'Nữ','17/10/2001','20/03/2020','0126356892',20000000),
('NV06',N'Nguyễn Ngọc Thanh Loan',N'KHÁNH HÒA',N'Nữ','09/03/1975','20/07/2006','0243852369',80000000),
('NV07',N'Lê Thị Hào',N'TP.HCM',N'Nữ','10/03/2001','03/12/2018','0904657894',30000000),
('NV08',N'Phạm Toàn Minh Hiếu',N'NHA TRANG',N'Nam','07/12/2000','08/03/2020','0909589841',40000000),
('NV09',N'Cao Ngọc Phương Trinh',N'HÓC MÔN',N'Nữ','04/05/1999','23/03/2020','0917753684',50000000),
('NV10',N'Dư Thư Thùy Dương',N'CẦN THƠ',N'Nữ','28/02/1999','23/09/2020','0935385628',70000000)

------NH?P BẢNG KHACHHANG
INSERT INTO KHACHHANG
VALUES
('KH01',N'Nguyễn Thị Thanh Hưng',N'Nữ',N'TP.HCM','0364767243'),
('KH02',N'Nguyễn Thị Thúy Hằng',N'Nữ',N'CẦN THƠ','0963745625'),
('KH03',N'Trinh Thị Hải Yến',N'Nữ',N'AN GIANG','0975645370'),
('KH04',N'Nguyễn Thanh Vỹ',N'Nam',N'LONG AN','0976352638'),
('KH05',N'Nguyễn Thị Thúy Hằng',N'Nữ',N'TP.HCM','0945324538'),
('KH06',N'Huỳnh Thị Khánh Trang',N'Nữ',N'TP.HCM','0963725379'),
('KH07',N'Trần Thị Thùy Nhung',N'Nữ',N'TP.HCM','0803647365'),
('KH08',N'Diệp Tú Giang',N'Nam',N'TP.HCM','0902045342'),
('KH09',N'Nguyễn Thị Hồng',N'Nữ',N'TP.HCM','0886534271'),
('KH10',N'Nguyễn Bo Lực',N'Nam',N'TP.HCM','0983752527'),
('KH11',N'Nguyễn Thúy Hiền',N'Nữ',N'TP.HCM','0854828423'),
('KH12',N'Lê Minh Triều',N'Nam',N'TP.HCM','0835427287'),
('KH13',N'Nguyễn Thu Hằng',N'Nữ',N'TP.HCM','0987543212'),
('KH14',N'Nguyễn Thị Huyền Ly',N'Nữ',N'TP.HCM','0925362438'),
('KH15',N'Mai Thư Diễm',N'Nữ',N'TIỀN GIANG','0987678678'),
('KH16',N'Nguyễn Bo Hoàng',N'Nam',N'VĨNH LONG','0876563211'),
('KH17',N'Phạm Vy Quang Vinh',N'Nam',N'KIÊN GIANG','0976880903'),
('KH18',N'Huỳnh Thư Thanh Nga',N'Nữ',N'BẾN TRE','0988322241'),
('KH19',N'Huỳnh Thư Kim Loan',N'Nữ',N'BẾN TRE','0878493212'),
('KH20',N'Trần Thị Thùy Dương',N'Nữ',N'CÀ MAU','0987771232')

------NH?P BẢNG LOAIDONGHO
INSERT INTO LOAIDONGHO
VALUES
('MLDH01',N'Grand Complications'),
('MLDH02',N'Complications'),
('MLDH03',N'Calatrava'),
('MLDH04',N'Gondolo'),
('MLDH05',N'Golden Ellipse'),
('MLDH06',N'Nautilus'),
('MLDH07',N'Aquanaut'),
('MLDH08',N'Twenty~4')

------NH?P BẢNG NHACUNGCAP
INSERT INTO NHACUNGCAP
VALUES
('NCC01',N'GALLE WATCH',N'393 Điện Biên Phủ, phường 4, quận 3','0908836589'),
('NCC02',N'Boss Luxury',N'60 Ngô Quỳn, Hoàn Kim, Hà Ni','0889606060'),
('NCC03',N'Laimut',N'195 Nguyễn Đình Chiểu, phường 5, quận 3, Thành phố Hồ Chí Minh','0937374254'),
('NCC04',N'Vina Watch',N'31 Nguyễn Tất Thành, phường 13, quận 4, Tp HCM','0983825310'),
('NCC05',N'ClockWs',N'265 Nguyễn Thiện Thuật, phường 3, quận 3, Tp Hồ Chí Minh','0918795589')

------NH?P BẢNG DONGHO
INSERT INTO DONGHO
VALUES
('DH01',N'  Grand Complications 5327R-001',N'Rose Gold',382000000,'MLDH01','NCC01',0,'Hinh1.jpg'),
('DH02',N'  Grand Complications 5327G-001',N'White Gold',2083000000,'MLDH01','NCC02',0,'Hinh2.jpg'),
('DH03',N'  Grand Complications 5236P-001',N'Platinum',20000000,'MLDH01','NCC03',0,'Hinh3.jpg'),
('DH04',N'  Complications 5212A-001',N'Stainless Steel',8750000,'MLDH02','NCC04',0,'Hinh4.jpg'),
('DH05',N'  Complications 5147G-001',N'White Gold',1676000000,'MLDH02','NCC05',0,'Hinh5.jpg'),
('DH06',N'  Complications 5396R-011',N'Rose Gold',23990000,'MLDH02','NCC05',0,'Hinh6.jpg'),
('DH07',N'  Calatrava 6119G-001',N'White Gold',2900000,'MLDH03','NCC03',0,'Hinh7.jpg'),
('DH08',N'  Calatrava 6119R-001',N'Rose Gold',4600000,'MLDH03','NCC01',0,'Hinh8.jpg'),
('DH09',N'  Calatrava 4997/200G-001',N'White Gold',33000000,'MLDH03','NCC04',0,'Hinh9.jpg'),
('DH10',N'  Gondolo 7041R-001',N'Rose Gold',5300000,'MLDH04','NCC05',0,'Hinh10.jpg'),
('DH11',N'  Gondolo 7042/100G-010',N'White Gold',14250000000,'MLDH04','NCC01',0,'Hinh11.jpg'),
('DH12',N'  Gondolo 7042/100R-010',N'Rose Gold',14250000000,'MLDH04','NCC02',0,'Hinh12.jpg'),
('DH13',N'  Golden Ellipse 5738/51G-001',N'White Gold',3890000,'MLDH05','NCC03',0,'Hinh13.jpg'),
('DH14',N'  Golden Ellipse 5738R-001',N'Rose Gold',6700000,'MLDH05','NCC04',0,'Hinh14.jpg'),
('DH15',N'  Golden Ellipse 5738P-001',N'Platinum',4150000,'MLDH05','NCC05',0,'Hinh15.jpg'),
('DH16',N'  Nautilus 7010R-011',N'Rose Gold',7990000,'MLDH06','NCC05',0,'Hinh16.jpg'),
('DH17',N'  Nautilus 7010R-012',N'Rose Gold',6990000,'MLDH06','NCC02',0,'Hinh17.jpg'),
('DH18',N'  Nautilus 7010/1R-011',N'Rose Gold',3990000,'MLDH06','NCC04',0,'Hinh18.jpg'),
('DH19',N'  Aquanaut 5167R-001',N'Rose Gold',4150000,'MLDH07','NCC05',0,'Hinh19.jpg'),
('DH20',N'  Aquanaut 5167A-001',N'Stainless Steel',415000000,'MLDH07','NCC02',0,'Hinh20.jpg'),
('DH21',N'  Aquanaut5167/1A-001',N'Stainless Steel',403000000,'MLDH07','NCC01',0,'Hinh21.jpg'),
('DH22',N'  Twenty~4 7300/1200A-001',N'Stainless Steel',495000000,'MLDH08','NCC02',0,'Hinh22.jpg'),
('DH23',N'  Twenty~4 7300/1200A-010',N'Stainless Steel',115000000,'MLDH08','NCC03',0,'Hinh23.jpg'),
('DH24',N'  Twenty~4 7300/1200A-011',N'Stainless Steel',215000000,'MLDH08','NCC04',0,'Hinh24.jpg')



INSERT INTO ACCOUNT
VALUES
('admin',N'Nguyễn Văn',N'A','12345','admin@gmail.com','12/02/2001'),
('user',N'Nguyễn Văn',N'B','12345','user@gmail.com','12/02/2001')

